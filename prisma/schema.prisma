generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id      String  @id @default(cuid()) // Clerk user ID
  email   String?
  classes Class[] // Relation to Class model (One-to-many)
}

model Class {
  id          String  @id @default(cuid())
  name        String
  description String
  userId      String  // Foreign key to the User model
  user        User    @relation(fields: [userId], references: [id])
  files       File[]  // Relation to File model (One-to-many)
  quizes      Quiz[]
}

model File {
  id      String   @id @default(cuid())
  classId String   // Foreign key to the Class model
  class   Class    @relation(fields: [classId], references: [id])
  name    String   // Name of the uploaded file
  chunks  Chunk[]  // Relation to Chunk model (One-to-many)
}

model Chunk {
  id     String @id @default(cuid())
  fileId String // Foreign key to the File model
  file   File   @relation(fields: [fileId], references: [id])
  index  Int    // Order of the chunk in the file
  content String // The chunk content
}

model Quiz {
  id               String         @id @default(cuid())
  displayName      String
  textForGeneration String
  classId          String         // Foreign key to the Class model
  class            Class          @relation(fields: [classId], references: [id])
  questions        QuizQuestion[] // Relation to QuizQuestion model (One-to-many)
}

model QuizQuestion {
  id          String        @id @default(cuid())
  quizId      String        // Foreign key to the Quiz model
  quiz        Quiz          @relation(fields: [quizId], references: [id])
  question    String
  answers     Answer[]      // Relation to Answer model (One-to-many)
  correctAnswer Int
}


model Answer {
  id           String        @id @default(cuid())
  questionId   String        // Foreign key to the QuizQuestion model
  question     QuizQuestion  @relation(fields: [questionId], references: [id])
  answer       String        // The string value of the answer
}
